<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Experiment Configurations" href="../examples/experiments.html"><link rel="prev" title="AMASS Dataset Parsing" href="amass_parsing.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Retargeting Motion Data Between Humanoids - ProtoMotions documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">ProtoMotions  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">ProtoMotions  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/how_it_works.html">How It Works</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/training.html">Training Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/evaluation.html">Evaluation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/configuration.html">Configuration System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/algorithms.html">Algorithms</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_tutorials.html">Code Tutorials (Progressive Series)</a></li>
<li class="toctree-l1"><a class="reference internal" href="training_workflow.html">Training Workflow Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="motion_tracking.html">Motion Tracking Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_robot.html">Custom Robot Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Preparation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="amass_parsing.html">AMASS Dataset Parsing</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Retargeting Motion Data Between Humanoids</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/experiments.html">Experiment Configurations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/index.html">API Reference</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.html">protomotions.agents package</a><input aria-label="Toggle navigation of protomotions.agents package" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.amp.html">protomotions.agents.amp package</a><input aria-label="Toggle navigation of protomotions.agents.amp package" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.amp.agent.html">protomotions.agents.amp.agent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.amp.config.html">protomotions.agents.amp.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.amp.model.html">protomotions.agents.amp.model module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.ase.html">protomotions.agents.ase package</a><input aria-label="Toggle navigation of protomotions.agents.ase package" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ase.agent.html">protomotions.agents.ase.agent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ase.config.html">protomotions.agents.ase.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ase.model.html">protomotions.agents.ase.model module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.base_agent.html">protomotions.agents.base_agent package</a><input aria-label="Toggle navigation of protomotions.agents.base_agent package" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.base_agent.agent.html">protomotions.agents.base_agent.agent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.base_agent.config.html">protomotions.agents.base_agent.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.base_agent.model.html">protomotions.agents.base_agent.model module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.callbacks.html">protomotions.agents.callbacks package</a><input aria-label="Toggle navigation of protomotions.agents.callbacks package" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.callbacks.one_logger.html">protomotions.agents.callbacks.one_logger module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.callbacks.slurm_autoresume_adlr.html">protomotions.agents.callbacks.slurm_autoresume_adlr module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.callbacks.slurm_autoresume_srun.html">protomotions.agents.callbacks.slurm_autoresume_srun module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.common.html">protomotions.agents.common package</a><input aria-label="Toggle navigation of protomotions.agents.common package" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.common.common.html">protomotions.agents.common.common module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.common.config.html">protomotions.agents.common.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.common.mlp.html">protomotions.agents.common.mlp module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.common.transformer.html">protomotions.agents.common.transformer module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.evaluators.html">protomotions.agents.evaluators package</a><input aria-label="Toggle navigation of protomotions.agents.evaluators package" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.evaluators.base_evaluator.html">protomotions.agents.evaluators.base_evaluator module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.evaluators.config.html">protomotions.agents.evaluators.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.evaluators.metrics.html">protomotions.agents.evaluators.metrics module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.evaluators.mimic_evaluator.html">protomotions.agents.evaluators.mimic_evaluator module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.evaluators.smoothness_evaluator.html">protomotions.agents.evaluators.smoothness_evaluator module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.masked_mimic.html">protomotions.agents.masked_mimic package</a><input aria-label="Toggle navigation of protomotions.agents.masked_mimic package" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.masked_mimic.agent.html">protomotions.agents.masked_mimic.agent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.masked_mimic.config.html">protomotions.agents.masked_mimic.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.masked_mimic.model.html">protomotions.agents.masked_mimic.model module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/protomotions.agents.mimic.html">protomotions.agents.mimic package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.ppo.html">protomotions.agents.ppo package</a><input aria-label="Toggle navigation of protomotions.agents.ppo package" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ppo.agent.html">protomotions.agents.ppo.agent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ppo.config.html">protomotions.agents.ppo.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ppo.model.html">protomotions.agents.ppo.model module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.ppo.utils.html">protomotions.agents.ppo.utils module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api_reference/protomotions.agents.utils.html">protomotions.agents.utils package</a><input aria-label="Toggle navigation of protomotions.agents.utils package" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.utils.data.html">protomotions.agents.utils.data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.utils.metering.html">protomotions.agents.utils.metering module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.utils.normalization.html">protomotions.agents.utils.normalization module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.utils.replay_buffer.html">protomotions.agents.utils.replay_buffer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.utils.step_tracker.html">protomotions.agents.utils.step_tracker module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/protomotions.agents.utils.training.html">protomotions.agents.utils.training module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/protomotions.envs.html">protomotions.envs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/protomotions.simulator.html">protomotions.simulator package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/protomotions.robot_configs.html">protomotions.robot_configs module</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api_reference/protomotions.utils.html">protomotions.utils package</a><input aria-label="Toggle navigation of protomotions.utils package" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/protomotions.utils.config_builder.html">protomotions.utils.config_builder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/protomotions.utils.config_utils.html">protomotions.utils.config_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/protomotions.utils.fabric_config.html">protomotions.utils.fabric_config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/protomotions.utils.motion_interpolation_utils.html">protomotions.utils.motion_interpolation_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/protomotions.utils.simulator_imports.html">protomotions.utils.simulator_imports module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/scripts.html">Training and Evaluation Scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community Showcase</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/tutorials/retargeting_motions.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="retargeting-motion-data-between-humanoids">
<h1>Retargeting Motion Data Between Humanoids<a class="headerlink" href="#retargeting-motion-data-between-humanoids" title="Link to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../_images/retargeting.gif"><img alt="Motion retargeting from SMPL to G1" src="../_images/retargeting.gif" style="width: 100%;" />
</a>
<p>This tutorial explains how to convert motion data from one humanoid robot to another using ProtoMotions’ retargeting pipeline.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p><strong>What is Motion Retargeting?</strong></p>
<p>Motion retargeting is the process of transferring motion data from one skeletal structure to another. For example, converting AMASS motions (captured from humans with SMPL skeleton) to work with robots like Unitree G1 or H1.</p>
<p><strong>Why Retarget?</strong></p>
<ul class="simple">
<li><p>Use mocap data recorded with humans with physical robots (G1, H1)</p></li>
<li><p>Adapt existing motion libraries to new robot morphologies</p></li>
<li><p>Transfer skills learned on one robot to another</p></li>
</ul>
<p><strong>Pipeline Overview:</strong></p>
<ol class="arabic simple">
<li><p><strong>Extract Keypoints</strong>: Convert source motions to intermediate keypoint format</p></li>
<li><p><strong>Retarget</strong>: Use inverse kinematics to map keypoints to target robot</p></li>
<li><p><strong>Extract Contacts</strong>: Determine foot contact labels</p></li>
<li><p><strong>Convert to Isaac</strong>: Format for simulator compatibility</p></li>
<li><p><strong>Package</strong>: Create final motion library file</p></li>
</ol>
</section>
<section id="retargeting-amass-to-g1">
<h2>Retargeting AMASS to G1<a class="headerlink" href="#retargeting-amass-to-g1" title="Link to this heading">¶</a></h2>
<p>This example shows how to retarget the full AMASS dataset to the Unitree G1 robot.</p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h3>
<p><strong>Required Tools:</strong></p>
<ul class="simple">
<li><p>ProtoMotions with retargeting scripts</p></li>
<li><p>Pyroki (IK retargeting library)</p></li>
<li><p>AMASS dataset in ProtoMotions format</p></li>
</ul>
<p><strong>Environment Setup:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ProtoMotions environment (for extraction, conversion, packaging)</span>
conda<span class="w"> </span>activate<span class="w"> </span>protomotions_env

<span class="c1"># Pyroki environment (for IK retargeting)</span>
conda<span class="w"> </span>activate<span class="w"> </span>pyroki_env
</pre></div>
</div>
</section>
<section id="automated-pipeline-recommended">
<h3>Automated Pipeline (Recommended)<a class="headerlink" href="#automated-pipeline-recommended" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">retarget_all_amass_to_g1.py</span></code> script generates SLURM job scripts for the complete pipeline:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>data/scripts
python<span class="w"> </span>retarget_all_amass_to_g1.py
</pre></div>
</div>
<p><strong>What This Does:</strong></p>
<ol class="arabic simple">
<li><p>Generates 5 SLURM job scripts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1_extract_keypoints.sh</span></code> - Extract keypoints (24 parallel jobs)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2_retarget_run1.sh</span></code> - First retargeting pass (GPU, 4 hours)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2_retarget_run2.sh</span></code> - Second retargeting pass (GPU, 4 hours)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3_contact_extract.sh</span></code> - Extract contact labels (24 parallel jobs)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4_isaac_convert.sh</span></code> - Convert to Isaac format (24 parallel jobs)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5_merge_package.sh</span></code> - Merge and package final file</p></li>
</ul>
</li>
<li><p>Creates a master submission script (<code class="docutils literal notranslate"><span class="pre">submit_all.sh</span></code>)</p></li>
<li><p>Automatically syncs code to cluster</p></li>
<li><p>Chains jobs with dependencies</p></li>
</ol>
<p><strong>Submit All Jobs:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the cluster</span>
bash<span class="w"> </span>tmp/retarget_amass_g1_&lt;timestamp&gt;/submit_all.sh
</pre></div>
</div>
<p>The script will automatically:</p>
<ul class="simple">
<li><p>Submit all jobs with proper dependencies</p></li>
<li><p>Handle 4-hour GPU time limits by chaining runs</p></li>
<li><p>Parallelize work across 24 jobs where possible</p></li>
<li><p>Merge results into single <code class="docutils literal notranslate"><span class="pre">.pt</span></code> file</p></li>
</ul>
<p><strong>Skip Already Completed Stages:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Skip keypoint extraction (if already done)</span>
python<span class="w"> </span>retarget_all_amass_to_g1.py<span class="w"> </span>--skip-extract

<span class="c1"># Skip extraction and retargeting (if already done)</span>
python<span class="w"> </span>retarget_all_amass_to_g1.py<span class="w"> </span>--skip-extract-retarget
</pre></div>
</div>
</section>
<section id="manual-step-by-step-process">
<h3>Manual Step-by-Step Process<a class="headerlink" href="#manual-step-by-step-process" title="Link to this heading">¶</a></h3>
<p>For smaller datasets or custom workflows, you can run each stage manually.</p>
<p><strong>Step 1: Extract Keypoints</strong></p>
<p>Convert source motions to intermediate keypoint representation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>data/scripts/extract_retargeting_input_keypoints_from_packaged_motionlib.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>/path/to/amass.pt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--start-idx<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--skip-freq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--skeleton-format<span class="w"> </span>smpl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-path<span class="w"> </span>keypoints/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--force-remake
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start-idx</span></code>: Starting motion index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip-freq</span></code>: Process every Nth motion (for parallelization)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skeleton-format</span></code>: Source skeleton type (<code class="docutils literal notranslate"><span class="pre">smpl</span></code>, <code class="docutils literal notranslate"><span class="pre">smplx</span></code>, etc.)</p></li>
</ul>
<p><strong>Step 2: Retarget to Robot</strong></p>
<p>Use inverse kinematics to map keypoints to target robot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>pyroki
python<span class="w"> </span>batch_retarget_to_g1_from_keypoints.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--keypoints-folder-path<span class="w"> </span>keypoints/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-dir<span class="w"> </span>retargeted/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--urdf-path<span class="w"> </span>protomotions/data/assets/urdf/for_retargeting/g1.urdf<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--mesh-dir<span class="w"> </span>protomotions/data/assets/mesh/G1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-type<span class="w"> </span>smpl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--subsample-factor<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">source-type</span></code>: Source skeleton format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subsample-factor</span></code>: Downsample factor (1 = no downsampling)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip-existing</span></code>: Skip already retargeted motions</p></li>
</ul>
<p><strong>Step 3: Extract Contact Labels</strong></p>
<p>Determine foot contact states from keypoints:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>pyroki/batch_retarget_to_g1_from_keypoints.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--keypoints-folder-path<span class="w"> </span>keypoints/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--source-type<span class="w"> </span>smpl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--save-contacts-only<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--contacts-dir<span class="w"> </span>contacts/
</pre></div>
</div>
<p><strong>Step 4: Convert to Isaac Format</strong></p>
<p>Convert retargeted motions to simulator-compatible format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>data/scripts/convert_pyroki_retargeted_robot_motions_to_isaac.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--retargeted-motion-dir<span class="w"> </span>retargeted/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-dir<span class="w"> </span>isaac_format/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--robot-type<span class="w"> </span>g1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--contact-labels-dir<span class="w"> </span>contacts/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--apply-motion-filter<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--force-remake
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">robot-type</span></code>: Target robot (<code class="docutils literal notranslate"><span class="pre">g1</span></code>, <code class="docutils literal notranslate"><span class="pre">h1</span></code>, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apply-motion-filter</span></code>: Remove invalid/unstable motions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contact-labels-dir</span></code>: Contact label directory</p></li>
</ul>
<p><strong>Step 5: Package Motion Library</strong></p>
<p>Create final packaged motion library:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>protomotions/utils/motion_lib.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--motion-path<span class="w"> </span>isaac_format/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-file<span class="w"> </span>final_motions.pt
</pre></div>
</div>
</section>
</section>
<section id="retargeting-to-other-robots">
<h2>Retargeting to Other Robots<a class="headerlink" href="#retargeting-to-other-robots" title="Link to this heading">¶</a></h2>
<p>The same pipeline works for other robots. Key differences:</p>
<section id="unitree-h1">
<h3>Unitree H1<a class="headerlink" href="#unitree-h1" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use H1-specific scripts and URDFs</span>
python<span class="w"> </span>batch_retarget_to_h1_from_keypoints.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--urdf-path<span class="w"> </span>protomotions/data/assets/urdf/for_retargeting/h1.urdf<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--mesh-dir<span class="w"> </span>protomotions/data/assets/mesh/H1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>...

<span class="c1"># In conversion step</span>
python<span class="w"> </span>convert_pyroki_retargeted_robot_motions_to_isaac.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--robot-type<span class="w"> </span>h1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>...
</pre></div>
</div>
</section>
<section id="custom-robots">
<h3>Custom Robots<a class="headerlink" href="#custom-robots" title="Link to this heading">¶</a></h3>
<p>For custom robots:</p>
<ol class="arabic simple">
<li><p>Create URDF for retargeting (see <a class="reference internal" href="custom_robot.html"><span class="doc">Custom Robot Tutorial</span></a>)</p></li>
<li><p>Define keypoint mapping in retargeting script</p></li>
<li><p>Implement robot-specific <code class="docutils literal notranslate"><span class="pre">RobotConfig</span></code></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--robot-type</span> <span class="pre">custom</span></code> in conversion</p></li>
</ol>
</section>
</section>
<section id="understanding-the-output">
<h2>Understanding the Output<a class="headerlink" href="#understanding-the-output" title="Link to this heading">¶</a></h2>
<p>After retargeting, you’ll have:</p>
<p><strong>Intermediate Files:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">keypoints/</span></code>: Extracted 3D positions and rotations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">retargeted/</span></code>: Robot-specific joint angles (raw)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contacts/</span></code>: Foot contact labels per frame</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isaac_format/</span></code>: Individual <code class="docutils literal notranslate"><span class="pre">.npy</span></code> files per motion</p></li>
</ul>
<p><strong>Final Output:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">final_motions.pt</span></code>: Packaged motion library ready for training</p></li>
</ul>
<p><strong>Motion Library Contents:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>

<span class="n">motion_lib</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;final_motions.pt&#39;</span><span class="p">)</span>

<span class="c1"># Available data</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;gts&#39;</span><span class="p">]</span>            <span class="c1"># Global translations</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;grs&#39;</span><span class="p">]</span>            <span class="c1"># Global rotations (quaternions)</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;gvs&#39;</span><span class="p">]</span>            <span class="c1"># Global velocities</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;gavs&#39;</span><span class="p">]</span>           <span class="c1"># Global angular velocities</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;dps&#39;</span><span class="p">]</span>            <span class="c1"># DOF positions</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;dvs&#39;</span><span class="p">]</span>            <span class="c1"># DOF velocities</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;contacts&#39;</span><span class="p">]</span>       <span class="c1"># Contact labels</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;motion_lengths&#39;</span><span class="p">]</span> <span class="c1"># Duration of each motion</span>
<span class="n">motion_lib</span><span class="p">[</span><span class="s1">&#39;motion_files&#39;</span><span class="p">]</span>   <span class="c1"># Source file names</span>
</pre></div>
</div>
</section>
<section id="using-retargeted-motions">
<h2>Using Retargeted Motions<a class="headerlink" href="#using-retargeted-motions" title="Link to this heading">¶</a></h2>
<p>Once retargeted, use the motion library for training:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>protomotions/train_agent.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--robot-name<span class="w"> </span>g1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--simulator<span class="w"> </span>isaacgym<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--experiment-path<span class="w"> </span>examples/experiments/mimic/mlp.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--experiment-name<span class="w"> </span>g1_walking<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--motion-file<span class="w"> </span>datasets/amass/g1/final_motions.pt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--num-envs<span class="w"> </span><span class="m">4096</span>
</pre></div>
</div>
</section>
<section id="performance-tips">
<h2>Performance Tips<a class="headerlink" href="#performance-tips" title="Link to this heading">¶</a></h2>
<p><strong>Parallelization:</strong></p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--skip-freq</span></code> to split extraction across jobs</p></li>
<li><p>Process 24 chunks in parallel (optimal for SLURM)</p></li>
<li><p>GPU retargeting benefits from batching</p></li>
</ul>
<p><strong>Memory Management:</strong></p>
<ul class="simple">
<li><p>Increase <code class="docutils literal notranslate"><span class="pre">--mem</span></code> for large datasets (32GB recommended)</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--skip-existing</span></code> to resume interrupted jobs</p></li>
<li><p>Clear intermediate files after packaging</p></li>
</ul>
<p><strong>Quality Control:</strong></p>
<ul class="simple">
<li><p>Always use <code class="docutils literal notranslate"><span class="pre">--apply-motion-filter</span></code> to remove bad motions</p></li>
<li><p>Check contact labels visually before training</p></li>
<li><p>Verify joint limits in retargeted motions</p></li>
</ul>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<p><strong>Retargeting Failures</strong></p>
<p>If some motions fail to retarget:</p>
<ul class="simple">
<li><p>Check URDF joint limits</p></li>
<li><p>Verify keypoint extraction quality</p></li>
<li><p>Try increasing IK solver iterations</p></li>
</ul>
<p><strong>Contact Label Issues</strong></p>
<p>If contacts look wrong:</p>
<ul class="simple">
<li><p>Verify source skeleton format matches data</p></li>
<li><p>Check ground height assumptions</p></li>
<li><p>Adjust contact detection thresholds</p></li>
</ul>
<p><strong>Packaging Errors</strong></p>
<p>If packaging fails:</p>
<ul class="simple">
<li><p>Ensure all <code class="docutils literal notranslate"><span class="pre">.npy</span></code> files have same structure</p></li>
<li><p>Check for corrupted files (zero size)</p></li>
<li><p>Verify robot DOF count matches data</p></li>
</ul>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="motion_tracking.html"><span class="doc">Motion Tracking Tutorial</span></a> - Train agents with retargeted motions</p></li>
<li><p><a class="reference internal" href="custom_robot.html"><span class="doc">Custom Robot Tutorial</span></a> - Add support for new robots</p></li>
<li><p><a class="reference internal" href="amass_parsing.html"><span class="doc">AMASS Dataset Parsing</span></a> - Process raw AMASS data</p></li>
</ul>
</section>
<section id="related-scripts">
<h2>Related Scripts<a class="headerlink" href="#related-scripts" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data/scripts/retarget_all_amass_to_g1.py</span></code> - Full AMASS to G1 pipeline</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/scripts/retarget_all_amass_to_h1.py</span></code> - Full AMASS to H1 pipeline</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/scripts/extract_retargeting_input_keypoints_from_packaged_motionlib.py</span></code> - Keypoint extraction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/scripts/convert_pyroki_retargeted_robot_motions_to_isaac.py</span></code> - Isaac conversion</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyroki/batch_retarget_to_g1_from_keypoints.py</span></code> - G1 retargeting</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyroki/batch_retarget_to_h1_from_keypoints.py</span></code> - H1 retargeting</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../examples/experiments.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Experiment Configurations</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="amass_parsing.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">AMASS Dataset Parsing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Chen Tessler, Yifeng Jiang, Erwin Coumans, Haotian Zhang, Davis Rempe, Xue Bin Peng, Sanja Fidler, and Gal Chechik
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Retargeting Motion Data Between Humanoids</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#retargeting-amass-to-g1">Retargeting AMASS to G1</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#automated-pipeline-recommended">Automated Pipeline (Recommended)</a></li>
<li><a class="reference internal" href="#manual-step-by-step-process">Manual Step-by-Step Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#retargeting-to-other-robots">Retargeting to Other Robots</a><ul>
<li><a class="reference internal" href="#unitree-h1">Unitree H1</a></li>
<li><a class="reference internal" href="#custom-robots">Custom Robots</a></li>
</ul>
</li>
<li><a class="reference internal" href="#understanding-the-output">Understanding the Output</a></li>
<li><a class="reference internal" href="#using-retargeted-motions">Using Retargeted Motions</a></li>
<li><a class="reference internal" href="#performance-tips">Performance Tips</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li><a class="reference internal" href="#related-scripts">Related Scripts</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8a448e45"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    </body>
</html>